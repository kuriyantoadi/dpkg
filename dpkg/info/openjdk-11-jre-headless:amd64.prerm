#!/bin/sh

set -e

basedir=/usr/lib/jvm/java-11-openjdk-amd64
jre_tools='rmid java keytool jjs pack200 rmiregistry unpack200 orbd servertool tnameserv'

if [ "$1" = "remove" ] || [ "$1" = "deconfigure" ]; then
    for i in $jre_tools; do
	update-alternatives --remove $i $basedir/bin/$i
    done

    if which update-binfmts >/dev/null; then
	# try to remove and ignore the error
	if [ -e /var/lib/binfmts/openjdk-11 ]; then
	    update-binfmts --package openjdk-11 \
		--remove jar /usr/bin/jexec || true
	fi
    fi

    update-alternatives --remove jexec $basedir/lib/jexec

    rm -f $basedir/lib/*/classes.jsa
fi


